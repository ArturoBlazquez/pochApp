<h1>Pocha Score Tracker</h1>

<!-- Setup -->
<div *ngIf="stage === 'setup'">
  <h2>Enter Player Names</h2>
  <input [(ngModel)]="nameInput" placeholder="Player name" />
  <button (click)="addPlayer()">Add Player</button>
  <ul><li *ngFor="let p of playerNames">{{ p }}</li></ul>
  <button (click)="startGame()" [disabled]="playerNames.length === 0">Start Game</button>
</div>

<!-- Predictions -->
<div *ngIf="stage === 'predictions'">
  <h2>Predictions (Hand {{ currentHandIndex + 1 }})</h2>
  <table border="1">
    <tr><th>Player</th><th>Predicted Tricks</th></tr>
    <tr *ngFor="let player of currentHand">
      <td>{{ player.playerId }}</td>
      <td><input type="number" [(ngModel)]="player.predicted" name="pred-{{player.playerId}}" required></td>
    </tr>
  </table>
  <button (click)="submitPredictions()">Next</button>
  <button (click)="back()">Back</button>
</div>

<!-- Results -->
<div *ngIf="stage === 'results'">
  <h2>Results (Hand {{ currentHandIndex + 1 }})</h2>
  <table border="1">
    <tr><th>Player</th><th>Actual Tricks</th></tr>
    <tr *ngFor="let player of currentHand">
      <td>{{ player.playerId }}</td>
      <td><input type="number" [(ngModel)]="player.actual" name="act-{{player.playerId}}" required></td>
    </tr>
  </table>
  <button (click)="submitResults()">Next</button>
  <button (click)="back()">Back</button>
</div>

<!-- Scoreboard -->
<div *ngIf="stage === 'scoreboard'">
  <h2>Scores after Hand {{ currentHandIndex + 1 }}</h2>
  <table border="1">
    <tr><th>Player</th><th>Total Score</th></tr>
    <tr *ngFor="let name of playerNames">
      <td>{{ name }}</td>
      <td>{{ totals[name] ?? 0 }}</td>
    </tr>
  </table>
  <button (click)="nextHand()">Next Hand</button>
  <button (click)="back()">Back</button>
  <button (click)="endGame()">End Game</button>
</div>

<!-- End -->
<div *ngIf="stage === 'ended'">
  <h2>Game Over</h2>
  <ul>
    <li *ngFor="let name of playerNames">{{ name }}: {{ totals[name] ?? 0 }}</li>
  </ul>
  <button (click)="back()">Back</button>
</div>

